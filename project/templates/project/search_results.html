<!-- project/templates/project/search_results.html -->
<!-- Author: Oluwatimilehin Akibu (akilu@bu.edu), 12/9/2025 -->
<!-- Description: HTML template that renders the results of search -->
{% extends 'project/base.html' %}
{% load static %}

{% block content %}

<h3>Profiles matching the query for "{{query}}" </h3>

<div class="grid-profiles-container">
    <!-- for loop to load each profile matching the query -->
    {% for profile in profiles %}
    <div style="width: 175px;">
        <a href="{% url 'show_profile' profile.pk %}">
        <img style="height: 150px; width: 150px; border-radius: 100px;" 
        src="{{profile.profile_image_url}}" alt="profile image"/>
        <p>{{profile.username}}</p>
        </a>
        <p style="color: #717171">{{profile.bio_text}}</p>
        
    </div>
    {%endfor%}
</div>

<h3>Songs matching the query for "{{query}}" </h3>

<!-- This if statements prevents a minor CSS issue -->
{% if songs %} 
    <div class="grid-songs-container">
    <!-- for loop to load each song that matches the query -->
    {% for song in songs %}
            <div style="display: flex;">
                <a href="{% url 'show_song' song.pk %}">
                    <img style="height: 175px; width: 175px;" src="{{song.profile.profile_image_url}}"/>
                </a>
                
            </div>
            <div style="padding-left: 10px; font-size: large;">
                    <p>{{song.name}}</p>
                    <h6 style="color: #717171">{{song.timestamp}}</h6>
                    <!-- If song has no audio, display text -->
                    {% if song.audio_file %}
                        <audio style="width: 500px;" controls>
                            <source src="{{song.audio_file.url}}" type="audio/wav">
                        </audio>
                    {% else %}
                        <p>No audio.</p>
                    {% endif %}
                </div>
    {% endfor %}
{%endif%}
</div>

{% endblock %}